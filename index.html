<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ““ Live Class Notes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{font-family:'Segoe UI',sans-serif;margin:0;background:#f0f4f8;color:#333;}
header{background:#1f2d3d;color:#fff;padding:16px 20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 5px rgba(0,0,0,0.2);}
header .title{font-size:24px;font-weight:bold;}
.container{max-width:1000px;margin:20px auto;padding:0 20px;}
#toolbar{display:none;flex-wrap:nowrap;overflow-x:auto;gap:6px;margin-bottom:12px;background:#e0e7ff;padding:10px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
button{background:#4f46e5;color:#fff;border:none;padding:8px 14px;border-radius:8px;cursor:pointer;transition:0.2s;font-size:16px;flex:0 0 auto;}
button:hover{background:#3730a3;}
button.ghost{background:transparent;color:#4f46e5;border:1px solid #c7d2fe;}
#editor{background:#fff;padding:18px;border-radius:12px;min-height:450px;box-shadow:0 4px 12px rgba(0,0,0,0.1);overflow:auto;font-size:18px;line-height:1.5;white-space:pre-wrap;}
footer{text-align:center;font-size:14px;color:#555;margin:20px 0;}
#roleModal{position:fixed;inset:0;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center;z-index:999;}
.modalCard{background:#fff;padding:24px;border-radius:12px;max-width:500px;width:90%;box-shadow:0 4px 12px rgba(0,0,0,0.2);}
input[type=password]{width:100%;padding:10px;margin-top:10px;border-radius:6px;border:1px solid #ccc;font-size:16px;}
.row{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap;}
#status{font-size:14px;color:#d1d5db;}
@media (max-width:600px){
  body{font-size:16px;}
  #editor{font-size:20px;padding:12px;}
  button{padding:6px 10px;font-size:16px;}
  header .title{font-size:20px;}
}
</style>
</head>
<body>

<header>
<div class="title">ðŸ““ Live Class Notes</div>
<div id="status">Ready</div>
</header>

<div class="container">
<div id="toolbar">
<button data-symbol="âˆš">âˆš</button>
<button data-symbol="Ï€">Ï€</button>
<button data-symbol="^">^</button>
<button data-symbol="a/b">a/b</button>
<button data-symbol="Î£">Î£</button>
<button data-symbol="âˆ«">âˆ«</button>
<button data-symbol="Î¸">Î¸</button>
<button data-symbol="Î±">Î±</button>
<button data-symbol="Î²">Î²</button>
<button data-symbol="Î³">Î³</button>
<button data-symbol="Î”">Î”</button>
<button data-symbol="Î»">Î»</button>
<button data-symbol="Î¼">Î¼</button>
<button data-symbol="Ïƒ">Ïƒ</button>
<button data-symbol="âˆž">âˆž</button>
<button data-symbol="Â±">Â±</button>
<button data-symbol="â‰¤">â‰¤</button>
<button data-symbol="â‰¥">â‰¥</button>
<button data-symbol="âˆ’">âˆ’</button>
<button data-symbol="+">+</button>
<button data-symbol="Ã—">Ã—</button>
<button data-symbol="Ã·">Ã·</button>
<button data-symbol="=">=</button>
<button id="btnClear">ðŸ—‘ Clear</button>
</div>

<div id="editor" contenteditable="false">
<p style="color:#888;">Waiting for teacher...</p>
</div>

<footer>Teacher types â€¢ Students watch live</footer>
</div>

<div id="roleModal">
<div class="modalCard">
<h3>Select role</h3>
<div class="row">
<button id="btnTeacher">Teacher</button>
<button id="btnStudent" class="ghost">Student</button>
</div>
<div id="pwBlock" style="display:none;margin-top:12px">
<label>Password:</label>
<input type="password" id="pwInput" placeholder="Enter password">
<div class="row">
<button id="btnEnter">Enter</button>
<button id="btnCancel" class="ghost">Cancel</button>
</div>
</div>
</div>
</div>

<script>
// === Firebase config ===
const firebaseConfig = {
  apiKey: "AIzaSyCjivkTeBcbr-UnnkfMbIYX7_9Wxya5U04",
  authDomain: "raheim-s-class.firebaseapp.com",
  databaseURL: "https://raheim-s-class-default-rtdb.firebaseio.com",
  projectId: "raheim-s-class",
  storageBucket: "raheim-s-class.appspot.com", // FIXED
  messagingSenderId: "576992270609",
  appId: "1:576992270609:web:7441555f9299b8d42bd4b0",
  measurementId: "G-MQZ68MPYH3"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// === Variables ===
const editor = document.getElementById('editor');
const toolbar = document.getElementById('toolbar');
let isTeacher = false;
const TEACHER_PASSWORD = "raheimp100classstarts";

// === Load notes for students ===
db.ref('notes').on('value', (snapshot)=>{
  if(!isTeacher){
    const data = snapshot.val();
    if(data && data.content !== undefined){
      editor.innerHTML = data.content;
    }
  }
});

// === Auto update while teacher types ===
editor.addEventListener("input", ()=>{
  if(isTeacher){
    db.ref('notes').set({ content: editor.innerHTML });
  }
});

// === Toolbar buttons ===
toolbar.querySelectorAll("button[data-symbol]").forEach(btn=>{
  btn.onclick=()=>{
    if(!isTeacher) return;
    const symbol = btn.getAttribute("data-symbol");
    editor.innerHTML += symbol;
    db.ref('notes').set({ content: editor.innerHTML });
  };
});

// Clear button
document.getElementById("btnClear").onclick=()=>{
  if(isTeacher){
    editor.innerHTML="";
    db.ref('notes').set({ content: "" });
  }
};

// === Role modal ===
const roleModal = document.getElementById("roleModal");
document.getElementById("btnTeacher").onclick = ()=>{ document.getElementById("pwBlock").style.display="block"; }
document.getElementById("btnCancel").onclick = ()=>{ document.getElementById("pwBlock").style.display="none"; }
document.getElementById("btnEnter").onclick = ()=>{
  const pw = document.getElementById("pwInput").value;
  if(pw === TEACHER_PASSWORD){
    isTeacher = true;
    toolbar.style.display="flex";
    editor.contentEditable="true";
    roleModal.style.display="none";
    editor.innerHTML="<p>Start typing your notes...</p>";
    db.ref('notes').set({ content: editor.innerHTML });
  } else { alert("Wrong password"); }
};
document.getElementById("btnStudent").onclick = ()=>{
  isTeacher = false;
  editor.contentEditable="false";
  toolbar.style.display="none";
  roleModal.style.display="none";
};
</script>

</body>
</html>
